!function(){cc.Scale9Sprite.WebGLRenderCmd=function(a){cc.Node.WebGLRenderCmd.call(this,a),this._cachedParent=null,this._cacheDirty=!1};var a=cc.Scale9Sprite.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);a.constructor=cc.Scale9Sprite.WebGLRenderCmd,a.visit=function(a){var b=this._node;b._visible&&(b._positionsAreDirty&&(b._updatePositions(),b._positionsAreDirty=!1,b._scale9Dirty=!0),cc.Node.WebGLRenderCmd.prototype.visit.call(this,a))},a.transform=function(a,b){var c=this._node;cc.Node.WebGLRenderCmd.prototype.transform.call(this,a,b),c._positionsAreDirty&&(c._updatePositions(),c._positionsAreDirty=!1,c._scale9Dirty=!0)},a._updateDisplayColor=function(a){cc.Node.WebGLRenderCmd.prototype._updateDisplayColor.call(this,a);var b=this._node._scale9Image;if(b)for(var c=b.getChildren(),d=0;d<c.length;d++){var e=c[d];e&&(e._renderCmd._updateDisplayColor(a),e._renderCmd._updateColor())}},a._updateDisplayOpacity=function(a){cc.Node.WebGLRenderCmd.prototype._updateDisplayOpacity.call(this,a);var b=this._node._scale9Image;if(b)for(var c=b.getChildren(),d=0;d<c.length;d++){var e=c[d];e&&(e._renderCmd._updateDisplayOpacity(a),e._renderCmd._updateColor())}},a.setState=function(a){var b=this._node._scale9Image;null!==b&&(a===cc.Scale9Sprite.state.NORMAL?b.setShaderProgram(cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR)):a===cc.Scale9Sprite.state.GRAY&&b.setShaderProgram(cc.Scale9Sprite.WebGLRenderCmd._getGrayShaderProgram()))},cc.Scale9Sprite.WebGLRenderCmd._grayShaderProgram=null,cc.Scale9Sprite.WebGLRenderCmd._getGrayShaderProgram=function(){var a=cc.Scale9Sprite.WebGLRenderCmd._grayShaderProgram;return a?a:(a=new cc.GLProgram,a.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_COLOR_VERT,cc.Scale9Sprite.WebGLRenderCmd._grayShaderFragment),a.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),a.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR),a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS),a.link(),a.updateUniforms(),cc.Scale9Sprite.WebGLRenderCmd._grayShaderProgram=a,a)},cc.Scale9Sprite.WebGLRenderCmd._grayShaderFragment="precision lowp float;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    vec4 c = texture2D(CC_Texture0, v_texCoord); \n    gl_FragColor.xyz = vec3(0.2126*c.r + 0.7152*c.g + 0.0722*c.b); \n     gl_FragColor.w = c.w ; \n}"}(),function(){cc.ScrollView.WebGLRenderCmd=function(a){cc.Layer.WebGLRenderCmd.call(this,a),this._needDraw=!1,this.startCmd=new cc.CustomRenderCmd(this,this._startCmd),this.endCmd=new cc.CustomRenderCmd(this,this._endCmd)};var a=cc.ScrollView.WebGLRenderCmd.prototype=Object.create(cc.Layer.WebGLRenderCmd.prototype);a.constructor=cc.ScrollView.WebGLRenderCmd,a._startCmd=function(){var a=this._node,b=cc.view,c=a._getViewRect();if(b.isScissorEnabled()){if(a._scissorRestored=!0,a._parentScissorRect=b.getScissorRect(),cc.rectIntersection(c,a._parentScissorRect)){var d=a._parentScissorRect,e=Math.max(c.x,d.x),f=Math.max(c.y,d.y),g=Math.min(c.x+c.width,d.x+d.width),h=Math.min(c.y+c.height,d.y+d.height);b.setScissorInPoints(e,f,g-e,h-f)}}else{var i=cc._renderContext;i.enable(i.SCISSOR_TEST),b.setScissorInPoints(c.x,c.y,c.width,c.height)}},a._endCmd=function(){var a=this._node;if(a._scissorRestored){var b=a._parentScissorRect;cc.view.setScissorInPoints(b.x,b.y,b.width,b.height)}else{var c=cc._renderContext;c.disable(c.SCISSOR_TEST)}},a.visit=function(a){var b,c,d,e=this._node,f=e._children;if(cc.kmGLPushMatrix(),this.transform(a),e._clippingToBounds&&cc.renderer.pushRenderCommand(this.startCmd),f&&f.length>0){for(d=f.length,b=0;d>b&&(c=f[b],c&&c._localZOrder<0);b++)c._renderCmd.visit();for(;d>b;b++)f[b]._renderCmd.visit()}e._clippingToBounds&&cc.renderer.pushRenderCommand(this.endCmd),this._dirtyFlag=0,cc.kmGLPopMatrix()}}();