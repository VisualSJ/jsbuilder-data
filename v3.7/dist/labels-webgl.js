!function(){cc.LabelAtlas.WebGLRenderCmd=function(a){cc.AtlasNode.WebGLRenderCmd.call(this,a),this._needDraw=!0};var a=cc.LabelAtlas.WebGLRenderCmd.prototype=Object.create(cc.AtlasNode.WebGLRenderCmd.prototype);a.constructor=cc.LabelAtlas.WebGLRenderCmd,a.setCascade=function(){var a=this._node;a._cascadeOpacityEnabled=!0,a._cascadeColorEnabled=!0},a.rendering=function(a){if(cc.AtlasNode.WebGLRenderCmd.prototype.rendering.call(this,a),cc.LABELATLAS_DEBUG_DRAW){var b=this._node.getContentSize(),c=[cc.p(0,0),cc.p(b.width,0),cc.p(b.width,b.height),cc.p(0,b.height)];cc._drawingUtil.drawPoly(c,4,!0)}},a.updateAtlasValues=function(){var a=this._node,b=a._string,c=b.length,d=this._textureAtlas,e=d.texture,f=e.pixelsWidth,g=e.pixelsHeight,h=a._itemWidth,i=a._itemHeight;a._ignoreContentScaleFactor||(h=a._itemWidth*cc.contentScaleFactor(),i=a._itemHeight*cc.contentScaleFactor()),c>d.getCapacity()&&cc.log("cc.LabelAtlas._updateAtlasValues(): Invalid String length");for(var j=d.quads,k=this._displayedColor,l={r:k.r,g:k.g,b:k.b,a:a._displayedOpacity},m=a._itemWidth,n=0,o=-1;c>n;n++){var p=b.charCodeAt(n)-a._mapStartChar.charCodeAt(0),q=p%a._itemsPerRow,r=0|p/a._itemsPerRow;if(!(0>q||0>r)){o++;var s,t,u,v;cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(s=(2*q*h+1)/(2*f),t=s+(2*h-2)/(2*f),u=(2*r*i+1)/(2*g),v=u+(2*i-2)/(2*g)):(s=q*h/f,t=s+h/f,u=r*i/g,v=u+i/g);var w=j[n],x=w.tl,y=w.tr,z=w.bl,A=w.br;x.texCoords.u=s,x.texCoords.v=u,y.texCoords.u=t,y.texCoords.v=u,z.texCoords.u=s,z.texCoords.v=v,A.texCoords.u=t,A.texCoords.v=v,z.vertices.x=o*m,z.vertices.y=0,z.vertices.z=0,A.vertices.x=o*m+m,A.vertices.y=0,A.vertices.z=0,x.vertices.x=o*m,x.vertices.y=a._itemHeight,x.vertices.z=0,y.vertices.x=o*m+m,y.vertices.y=a._itemHeight,y.vertices.z=0,x.colors=l,y.colors=l,z.colors=l,A.colors=l}}if(c>0){d.dirty=!0;var B=d.totalQuads;c>B&&d.increaseTotalQuadsWith(c-B)}},a.setString=function(a){var b=a.length;b>this._textureAtlas.totalQuads&&this._textureAtlas.resizeCapacity(b)},a._addChild=function(){}}(),function(){cc.LabelBMFont.WebGLRenderCmd=function(a){cc.SpriteBatchNode.WebGLRenderCmd.call(this,a),this._needDraw=!0};var a=cc.LabelBMFont.WebGLRenderCmd.prototype=Object.create(cc.SpriteBatchNode.WebGLRenderCmd.prototype);a.constructor=cc.LabelBMFont.WebGLRenderCmd,a._updateCharTexture=function(a,b,c){a.setTextureRect(b,!1),a.visible=!0},a._updateFntFileTexture=function(){},a._changeTextureColor=function(){},a._updateChildrenDisplayedOpacity=function(a){a.updateDisplayedOpacity(this._displayedOpacity)},a._updateChildrenDisplayedColor=function(a){a.updateDisplayedColor(this._displayedColor)},a._initBatchTexture=function(){var a=this._node,b=a.textureAtlas.texture;a._opacityModifyRGB=b.hasPremultipliedAlpha();var c=a._reusedChar=new cc.Sprite;c.initWithTexture(b,cc.rect(0,0,0,0),!1),c.batchNode=a},a.rendering=function(a){cc.SpriteBatchNode.WebGLRenderCmd.prototype.rendering.call(this,a);var b=this._node;if(cc.LABELBMFONT_DEBUG_DRAW){var c=b.getContentSize(),d=cc.p(0|-this._anchorPointInPoints.x,0|-this._anchorPointInPoints.y),e=[cc.p(d.x,d.y),cc.p(d.x+c.width,d.y),cc.p(d.x+c.width,d.y+c.height),cc.p(d.x,d.y+c.height)];cc._drawingUtil.setDrawColor(0,255,0,255),cc._drawingUtil.drawPoly(e,4,!0)}},a._updateCharColorAndOpacity=function(){}}();