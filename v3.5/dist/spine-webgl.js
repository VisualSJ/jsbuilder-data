!function(){sp.Skeleton.WebGLRenderCmd=function(a){cc.Node.WebGLRenderCmd.call(this,a),this._needDraw=!0,this.setShaderProgram(cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR))};var a=sp.Skeleton.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);a.constructor=sp.Skeleton.WebGLRenderCmd,a.rendering=function(a){var b=this._node;this._shaderProgram.use(),this._shaderProgram._setUniformForMVPMatrixWithMat4(this._stackMatrix);var c=b.getColor(),d=b._skeleton;d.r=c.r/255,d.g=c.g/255,d.b=c.b/255,d.a=b.getOpacity()/255,b._premultipliedAlpha&&(d.r*=d.a,d.g*=d.a,d.b*=d.a);var e,f,g,h,i,j,k=new cc.V3F_C4B_T2F_Quad,l=b._blendFunc;for(i=0,j=d.slots.length;j>i;i++)if(h=d.drawOrder[i],h.attachment){g=h.attachment;var m=b.getTextureAtlas(g);h.data.additiveBlending!=e?(f&&(f.drawQuads(),f.removeAllQuads()),e=!e,cc.glBlendFunc(l.src,e?cc.ONE:l.dst)):m!=f&&f&&(f.drawQuads(),f.removeAllQuads()),f=m;var n=f.getTotalQuads();if(f.getCapacity()==n&&(f.drawQuads(),f.removeAllQuads(),!f.resizeCapacity(2*f.getCapacity())))return;switch(h.attachment.type){case sp.ATTACHMENT_TYPE.REGION:sp._regionAttachment_updateQuad(g,h,k,b._premultipliedAlpha);break;case sp.ATTACHMENT_TYPE.MESH:sp._meshAttachment_updateQuad(g,h,k,b._premultipliedAlpha);break;case sp.ATTACHMENT_TYPE.SKINNED_MESH:}f.updateQuad(k,n)}if(f&&(f.drawQuads(),f.removeAllQuads()),b._debugBones||b._debugSlots){cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW),cc.current_stack.stack.push(cc.current_stack.top),cc.current_stack.top=this._stackMatrix;var o=cc._drawingUtil;if(b._debugSlots)for(o.setDrawColor(0,0,255,255),o.setLineWidth(1),i=0,j=d.slots.length;j>i;i++)if(h=d.drawOrder[i],h.attachment&&h.attachment.type==sp.ATTACHMENT_TYPE.REGION){g=h.attachment,k=new cc.V3F_C4B_T2F_Quad,sp._regionAttachment_updateQuad(g,h,k);var p=[];p.push(cc.p(k.bl.vertices.x,k.bl.vertices.y)),p.push(cc.p(k.br.vertices.x,k.br.vertices.y)),p.push(cc.p(k.tr.vertices.x,k.tr.vertices.y)),p.push(cc.p(k.tl.vertices.x,k.tl.vertices.y)),o.drawPoly(p,4,!0)}if(b._debugBones){var q;for(o.setLineWidth(2),o.setDrawColor(255,0,0,255),i=0,j=d.bones.length;j>i;i++){q=d.bones[i];var r=q.data.length*q.m00+q.worldX,s=q.data.length*q.m10+q.worldY;o.drawLine(cc.p(q.worldX,q.worldY),cc.p(r,s))}for(o.setPointSize(4),o.setDrawColor(0,0,255,255),i=0,j=d.bones.length;j>i;i++)q=d.bones[i],o.drawPoint(cc.p(q.worldX,q.worldY)),0==i&&o.setDrawColor(0,255,0,255)}cc.kmGLPopMatrix()}},a._createChildFormSkeletonData=function(){},a._updateChild=function(){}}();