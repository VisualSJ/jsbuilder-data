!function(){sp.Skeleton.WebGLRenderCmd=function(a){cc.Node.WebGLRenderCmd.call(this,a),this._needDraw=!0,this.setShaderProgram(cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR))};var a=sp.Skeleton.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);a.constructor=sp.Skeleton.WebGLRenderCmd,a.rendering=function(){var a=this._node;this._shaderProgram.use(),this._shaderProgram._setUniformForMVPMatrixWithMat4(this._stackMatrix);var b=a.getColor(),c=a._skeleton;c.r=b.r/255,c.g=b.g/255,c.b=b.b/255,c.a=a.getOpacity()/255,a._premultipliedAlpha&&(c.r*=c.a,c.g*=c.a,c.b*=c.a);var d,e,f,g,h,i,j=new cc.V3F_C4B_T2F_Quad,k=a._blendFunc;for(h=0,i=c.slots.length;i>h;h++)if(g=c.drawOrder[h],g.attachment&&g.attachment.type==sp.ATTACHMENT_TYPE.REGION){f=g.attachment;var l=a.getTextureAtlas(f);g.data.additiveBlending!=d?(e&&(e.drawQuads(),e.removeAllQuads()),d=!d,cc.glBlendFunc(k.src,d?cc.ONE:k.dst)):l!=e&&e&&(e.drawQuads(),e.removeAllQuads()),e=l;var m=e.getTotalQuads();if(e.getCapacity()==m&&(e.drawQuads(),e.removeAllQuads(),!e.resizeCapacity(2*e.getCapacity())))return;sp._regionAttachment_updateQuad(f,g,j,a._premultipliedAlpha),e.updateQuad(j,m)}if(e&&(e.drawQuads(),e.removeAllQuads()),a._debugBones||a._debugSlots){cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW),cc.current_stack.stack.push(cc.current_stack.top),cc.current_stack.top=this._stackMatrix;var n=cc._drawingUtil;if(a._debugSlots)for(n.setDrawColor(0,0,255,255),n.setLineWidth(1),h=0,i=c.slots.length;i>h;h++)if(g=c.drawOrder[h],g.attachment&&g.attachment.type==sp.ATTACHMENT_TYPE.REGION){f=g.attachment,j=new cc.V3F_C4B_T2F_Quad,sp._regionAttachment_updateQuad(f,g,j);var o=[];o.push(cc.p(j.bl.vertices.x,j.bl.vertices.y)),o.push(cc.p(j.br.vertices.x,j.br.vertices.y)),o.push(cc.p(j.tr.vertices.x,j.tr.vertices.y)),o.push(cc.p(j.tl.vertices.x,j.tl.vertices.y)),n.drawPoly(o,4,!0)}if(a._debugBones){var p;for(n.setLineWidth(2),n.setDrawColor(255,0,0,255),h=0,i=c.bones.length;i>h;h++){p=c.bones[h];var q=p.data.length*p.m00+p.worldX,r=p.data.length*p.m10+p.worldY;n.drawLine(cc.p(p.worldX,p.worldY),cc.p(q,r))}for(n.setPointSize(4),n.setDrawColor(0,0,255,255),h=0,i=c.bones.length;i>h;h++)p=c.bones[h],n.drawPoint(cc.p(p.worldX,p.worldY)),0==h&&n.setDrawColor(0,255,0,255)}cc.kmGLPopMatrix()}},a._createChildFormSkeletonData=function(){},a._updateChild=function(){}}();